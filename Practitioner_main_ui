import 'package:flutter/material.dart';
import 'package:google_fonts/google_fonts.dart';

void main() => runApp(const PractitionerApp());

class PractitionerApp extends StatelessWidget {
  const PractitionerApp({super.key});

  @override
  Widget build(BuildContext context) => MaterialApp(
        title: 'Practitioner Dashboard',
        theme: ThemeData(
          primarySwatch: Colors.blue,
          scaffoldBackgroundColor: Colors.white,
          textTheme: GoogleFonts.poppinsTextTheme(),
        ),
        home: const PractitionerDashboard(),
      );
}

class PractitionerDashboard extends StatelessWidget {
  const PractitionerDashboard({super.key});

  @override
  Widget build(BuildContext context) => Scaffold(
        body: SafeArea(
          child: SingleChildScrollView(
            padding: const EdgeInsets.all(16),
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                _title("Practitioner Dashboard", 24, FontWeight.bold),
                _text("Monitor your patients and therapy sessions!"),
                _gap(),
                _card([
                  _rowTitle("Smart Notifications", Icons.notifications_active, Colors.red),
                  _text("2 missed appointments", color: Colors.red),
                  _rowText("3 therapy reminders", "View More")
                ]),
                _gap(),
                _card([
                  _title("Upcoming Appointments"),
                  _appt("Aarav Singh - Virechana - 11:00 AM"),
                  _appt("Meera Patel - 2:00 PM"),
                ]),
                _gap(),
                _card([
                  _title("Quick Therapy Planner"),
                  GridView.count(
                    crossAxisCount: 2,
                    shrinkWrap: true,
                    physics: const NeverScrollableScrollPhysics(),
                    mainAxisSpacing: 12,
                    crossAxisSpacing: 12,
                    childAspectRatio: 3,
                    children: [
                      _planner(Icons.add, "New Appointment", Colors.blue),
                      _planner(Icons.history, "History", Colors.green),
                      _planner(Icons.schedule, "Today's Schedule", Colors.orange),
                      _planner(Icons.people, "Patient Groups", Colors.blueGrey),
                    ],
                  ),
                ]),
                _gap(),
                _card(const [
                  _RecentPatient("RS", "Sumit Sharma", "Vaman"),
                  Divider(),
                  _RecentPatient("PM", "Sneha Gupta", "Basti"),
                ], title: "Recent Patients"),
                _gap(),
                _title("Patient Overview"),
                _card([
                  Row(
                    mainAxisAlignment: MainAxisAlignment.spaceBetween,
                    children: [
                      Row(children: [
                        const Icon(Icons.check_circle, color: Colors.green),
                        const SizedBox(width: 8),
                        Column(crossAxisAlignment: CrossAxisAlignment.start, children: [
                          _title("Arjun Nair", 15, FontWeight.bold),
                          _text("Needs Attention", color: Colors.black54, size: 13),
                        ])
                      ]),
                      _text("Next visit: 08/15/2024", color: Colors.black54, size: 13)
                    ],
                  )
                ]),
              ],
            ),
          ),
        ),
        bottomNavigationBar: BottomNavigationBar(items: const [
          BottomNavigationBarItem(icon: Icon(Icons.people_outline), label: "Patients"),
          BottomNavigationBarItem(icon: Icon(Icons.assignment), label: "Therapy Plans"),
          BottomNavigationBarItem(icon: Icon(Icons.schedule_send), label: "Rescheduble"),
        ]),
      );

  // ---------- Helpers ----------
  static Widget _gap([double h = 20]) => SizedBox(height: h);

  static Widget _title(String t, [double s = 16, FontWeight w = FontWeight.bold]) =>
      Text(t, style: GoogleFonts.poppins(fontSize: s, fontWeight: w));

  static Widget _text(String t, {Color color = Colors.black, double size = 14}) =>
      Text(t, style: GoogleFonts.poppins(fontSize: size, color: color));

  static Widget _rowTitle(String t, IconData i, Color c) => Row(
        mainAxisAlignment: MainAxisAlignment.spaceBetween,
        children: [_title(t), Icon(i, color: c, size: 30)],
      );

  static Widget _rowText(String left, String right) => Row(
        children: [_text(left), const Spacer(), _text(right, size: 12)],
      );

  static Widget _appt(String t) =>
      Row(children: [const Icon(Icons.event, color: Colors.red), const SizedBox(width: 8), _text(t)]);

  static Widget _planner(IconData i, String t, Color c) => ElevatedButton.icon(
        onPressed: () {},
        style: ElevatedButton.styleFrom(
          elevation: 1,
          backgroundColor: Colors.white,
          foregroundColor: c,
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(12),
            side: BorderSide(color: c.withOpacity(0.5)),
          ),
        ),
        icon: Icon(i, size: 20),
        label: _text(t),
      );

  static Widget _card(List<Widget> children, {String? title}) => Card(
        shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),
        elevation: 2,
        child: Padding(
          padding: const EdgeInsets.all(12),
          child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [if (title != null) _title(title), ...children]),
        ),
      );
}

// ---------- Patient Tile ----------
class _RecentPatient extends StatelessWidget {
  final String initials, name, therapy;
  const _RecentPatient(this.initials, this.name, this.therapy);

  @override
  Widget build(BuildContext context) => Row(
        children: [
          CircleAvatar(child: Text(initials, style: GoogleFonts.poppins(fontWeight: FontWeight.bold))),
          const SizedBox(width: 12),
          Column(crossAxisAlignment: CrossAxisAlignment.start, children: [
            Text(name, style: GoogleFonts.poppins(fontWeight: FontWeight.bold, fontSize: 15)),
            Text(therapy, style: GoogleFonts.poppins(color: Colors.black54)),
          ])
        ],
      );
}


